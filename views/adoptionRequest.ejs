<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
        <title>View Adoption Request</title>
        <link rel="stylesheet" href="/css/adoption.css">
</head>

<body style="padding: 40px;">
  <h1>Adoption Request for <%= request.catId.name %></h1>
  <p class="subtitle">Microchip ID: <%= request.catId.microchipId %></p>

  <!-- display form input errors -->
  <% if (errors && errors.length > 0) { %>
    <h3 style="color: crimson;">ERROR</h3>
    <ul>
      <% errors.forEach(error => { %>
        <li style="color: crimson;"><%= error %></li>
      <% }) %>
    </ul>
  <% } %>

  <section class="panel">
    <h2 class="panel-title">Applicant details</h2>
    <!-- /adoption/request to add, /requests/update to update -->
    <form class="form" method="post" action="/requests/update" autocomplete="off">
      <div class="grid">
        <input type="hidden" name="id" value="<%= request._id %>">
        <label>Name<input name="name" required value="<%= request.applicant.name %>"></label>
        <label>Email<input name="email" type="email" required value="<%= request.applicant.email %>"></label>
        <label>Phone<input name="phone" type="tel" value="<%= request.applicant.phone %>"></label>
        <label class="wide">Address<input name="address" value="<%= request.applicant.address %>"></label>

        <label>Live with children?
          <div class="row">
            <label class="chip"><input type="radio" name="livesWithChildren" value="yes" <%= request.applicant.livesWithChildren ? 'checked' : '' %>>Yes</label>
            <label class="chip"><input type="radio" name="livesWithChildren" value="no" <%= !request.applicant.livesWithChildren ? 'checked' : '' %>>No</label>
          </div>
        </label>

        <label>Currently have pets?
          <div class="row">
            <label class="chip"><input type="radio" name="hasOtherPets" value="yes" <%= request.applicant.hasOtherPets ? 'checked' : '' %>>Yes</label>
            <label class="chip"><input type="radio" name="hasOtherPets" value="no" <%= !request.applicant.hasOtherPets ? 'checked' : '' %>>No</label>
          </div>
        </label>

        <label class="wide">Why would you like to adopt?
          <textarea name="whyAdopt" rows="3" required><%= request.applicant.whyAdopt %></textarea>
        </label>

        <h2 class="panel-title">Application details</h2><br>

        <div class="row">
          <label>Current Status
            <select name="status">
              <% ADOPTION_STATUSES.forEach(status => { %>
                <option value="<%= status %>" <%= request.status === status ? 'selected' : '' %>><%= status %></option>
              <% }) %>
            </select>
          </label>
        </div>

        <label class="wide">Staff Notes
          <textarea name="staffNotes" rows="2"><%= request.staffNotes %></textarea>
        </label>
      </div>

      <div class="actions">
        <button class="btn primary" type="submit">Update Request</button>
        <a class="btn" href="/requests">Back to list of requests</a>
      </div>
    </form>

    <p class="subtitle" style="font-size: 16px;">Tracking Code: <%= request.trackingCode %></p>
    <p class="subtitle" style="font-size: 16px;">Submitted at: <%= request.createdAt %></p>
    <p class="subtitle" style="font-size: 16px;">Last updated at: <%= request.updatedAt %></p>
  </section>
</body>

</html>